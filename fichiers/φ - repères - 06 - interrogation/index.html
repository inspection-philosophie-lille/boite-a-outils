<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<!--------------------------- Daniel Boulagnon --------------------------->
<!-------------------- daniel.boulagnon@ac-lille.fr ---------------------->
<!----------------------------- version 2025 ----------------------------->
<html lang="fr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>interrogation</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="icon" href="../../src/favicon.ico" />
		<style>
			* {
				padding: 0;
				margin: 0;
				box-sizing: border-box;
			}
			:root {
				--color-1: #fefefe; /* fond occupé par les cartes */
				--color-2: white; /* fond des cartes elles-mêmes */
				--color-3: #C02739;
				--color-4: red; /* couleur de la flèche sur la face de la carte */
			}
			body {
				width: 100%;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
				background: var(--color-1);
			}
			header {
				text-align: center;
				padding: 1rem;
			}
			header p:first-child {
				color: red;
				font-size: clamp(1.5rem, 5vw, 2.5rem);
				font-weight: bold;
				font-family: 'Muli', sans-serif;
				line-height: 48px;
				margin-bottom: 0.5rem;
			}
			header p:last-child {
				color: black;
				font-size: clamp(0.8rem, 3vw, 1.2rem);
				line-height: 1.2;
			}
			main {
				flex: 1;
				margin: 1rem auto;
				display: flex;
				justify-content: center;
				align-items: flex-start;
				flex-wrap: wrap;
				gap: 0.5rem;
				width: 90%;
				max-width: 1200px;
			}
			.card-wrapper {
				position: relative;
				min-height: 350px; /* longueur de chaque vignette */
				width: 100%;
				max-width: 230px;
				height: auto;
				margin: 0.5rem;
				perspective: 700px;
				perspective-origin: bottom;
			}
			.card-wrapper:hover .card {
				transform: rotateY(180deg);
			}
			.card {
				position: relative;
				height: 100%;
				min-height: 350px;
				transform-style: preserve-3d;
				transition: 0.8s cubic-bezier(0.62, 0, 0.55, 1);
			}
			.card-front, .card-back {
				position: absolute;
				height: 100%;
				width: 100%;
				padding: 30px;
				border-radius: 8px;
				backface-visibility: hidden;
				-webkit-backface-visibility: hidden;
				box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;
				background: var(--color-2);
				border: 1px solid #ddd;
			}
			.card-front {
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
			}
			.card-back {
				transform: rotateY(180deg);
				color: white;
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
			}
			.card-back h1 {
				position: absolute;
				top: 2rem;
				color: red;
				font-size: clamp(1.2rem, 4vw, 1.5rem);
				font-family: Arial, Helvetica, sans-serif;
			}
			.card-back p {
				position: absolute;
				top: 7rem;
				color: black;
				font-size: clamp(0.7rem, 2.5vw, 0.8rem);
				font-family: Arial, Helvetica, sans-serif;
				margin: 0 1rem;
				text-align: justify;
			}
			.line2 {
				width: 10rem;
				height: 0.6rem;
				margin-top: -5rem; /* hauteur du gros trait noir sur le recto */
				margin-bottom: 5rem;
				border-radius: 55px;
				box-shadow: inset 25px 25px 21px black, inset -25px -25px 21px #a21937;
			}
			.card-back a {
				text-decoration: none;
				color: white;
				position: absolute;
				bottom: 2rem;
				font-family: Arial, Helvetica, sans-serif;
				padding: 0.5rem 1rem;
				border-radius: 10px;
				border-radius: 51px;
				background: linear-gradient(145deg, #8d1530, #771229);
				box-shadow: 21px 21px 42px #620f21, -21px -21px 42px #a61939;
			}
			.card-back a:focus {
				border-radius: 51px;
				background: linear-gradient(145deg, #771229, #8d1530);
				box-shadow: 21px 21px 42px #620f21, -21px -21px 42px #a61939;
			}
			#user-icon {
				font-size: clamp(2rem, 6vw, 3rem);
				color: white;
			}
			.card-front h2 {
				position: absolute;
				top: 2rem;
				color: red;
				font-size: clamp(1.2rem, 4vw, 1.5rem);
				font-family: Arial, Helvetica, sans-serif;
			}
			.line {
				width: 10rem;
				height: 0.6rem;
				margin-top: -5rem; /* hauteur du gros trait noir sur la face avant de la carte */
				margin-bottom: 5rem;
				border-radius: 55px;
				box-shadow: inset 25px 25px 21px black, inset -25px -25px 21px #a21937;
			}
			.arrow {
				margin-right: 1rem;
				height: 0.1rem;
				width: 1.5rem;
				position: absolute;
				top: 11.5rem; /* hauteur de la flèche */
				transition: all 0.2s;
				background: var(--color-4);
				margin-top: 1rem;
				margin-bottom: 0.5rem;
			}
			.arrow::before, .arrow::after {
				content: "";
				position: absolute;
				right: 0;
				top: 0;
				height: 0.1rem;
				width: 0.6rem;
				background: var(--color-4);
			}
			.arrow::before {
				transform: rotate(45deg);
				transform-origin: right bottom;
			}
			.arrow::after {
				transform: rotate(-45deg);
				transform-origin: right top;
			}
			.card-front:hover .arrow {
				transition: all 0.2s;
				margin-left: 0.5rem;
				width: 5rem;
			}
			.Dicover {
				position: absolute;
				top: 7rem;
				color: black;
				font-size: clamp(0.7rem, 2.5vw, 0.8rem);
				font-family: Arial, Helvetica, sans-serif;
				display: flex;
				align-items: center;
				text-align: justify;
				justify-content: center;
				flex-direction: column;
				transition: all 0.2s;
			}
			a.lien {
				color: #000f55;
				margin: 0 0 20px 0;
				line-height: 48px;
				text-decoration: none;
				font-size: clamp(1rem, 3vw, 1.2rem);
			}
			a.lien:hover {
				font-weight: bold;
				text-decoration: none;
			}
			footer {
				text-align: center;
				padding: 1rem;
			}
			footer p {
				color: red;
				font-size: clamp(1.5rem, 5vw, 2.5rem);
				font-family: 'Muli', sans-serif;
				line-height: 48px;
			}
			/* Media Queries for Mobile */
			@media (max-width: 768px) {
				.card-wrapper {
					max-width: 90%;
					min-height: 300px; /* Reduced height for tablets */
				}
				.card {
					min-height: 300px;
				}
				.card-back p, .Dicover {
					font-size: clamp(0.6rem, 2.2vw, 0.7rem);
					top: 6rem; /* Scaled: 7rem * (300/350) ≈ 6rem */
				}
				.card-back h1, .card-front h2 {
					font-size: clamp(1rem, 3.5vw, 1.2rem);
				}
				.line, .line2 {
					width: 8rem;
					margin-top: -4.3rem; /* Scaled: -5rem * (300/350) */
					margin-bottom: 4.3rem; /* Scaled: 5rem * (300/350) */
				}
				.arrow {
					top: 9.86rem; /* Scaled: 11.5rem * (300/350) ≈ 9.86rem */
					margin-bottom: 0.43rem; /* Scaled: 0.5rem * (300/350) */
				}
			}
			@media (max-width: 480px) {
				.card-wrapper {
					max-width: 100%;
					min-height: 250px; /* Reduced height for mobile */
				}
				.card {
					min-height: 250px;
				}
				.card-back p, .Dicover {
					font-size: clamp(0.5rem, 2vw, 0.6rem);
					top: 5rem; /* Scaled: 7rem * (250/350) ≈ 5rem */
				}
				.card-back h1, .card-front h2 {
					font-size: clamp(0.9rem, 3vw, 1rem);
				}
				.line, .line2 {
					width: 6rem;
					margin-top: -3.57rem; /* Scaled: -5rem * (250/350) */
					margin-bottom: 3.57rem; /* Scaled: 5rem * (250/350) */
				}
				.arrow {
					top: 8.21rem; /* Scaled: 11.5rem * (250/350) ≈ 8.21rem */
					margin-bottom: 0.36rem; /* Scaled: 0.5rem * (250/350) */
				}
				header p:first-child {
					font-size: clamp(1.2rem, 4vw, 1.8rem);
				}
				header p:last-child {
					font-size: clamp(0.7rem, 2.5vw, 1rem);
				}
				footer p {
					font-size: clamp(1.2rem, 4vw, 1.8rem);
				}
			}
		</style>
	</head>
	<body>
		<section>
			<header>
				<p>interrogation</p>
				<p>réviser les repères</p>
			</header>
			<main>
				<template id="card_template">
					<div class="card-wrapper">
						<div class="card">
							<div class="card-front">
								<h2>Question</h2>
								<div class="line"></div>
								<div class="Dicover">
									<h4>Définir : « <span class="question"></span> » </h4>
									<div class="arrow"></div>
								</div>
							</div>
							<div class="card-back">
								<h1>Réponse</h1>
								<div class="line2"></div>
								<p>&#9658; Réponse : <span class="reponse"></span> </p>
							</div>
						</div>
					</div>
				</template>
			</main>
			<footer>
				<div id="page">
					<a class="lien" href="javascript:location.reload();">
						<p>&#8635;</p>
					</a>
				</div>
			</footer>
		</section>
		<script src="../../src/reperes.js"></script>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const template = document.getElementById('card_template');
				const main = document.querySelector('main');

				// Créer un tableau de toutes les définitions
				let allDefinitions = [];
				reperes.forEach(repere => {
					repere.parts.forEach(part => {
						allDefinitions.push(part);
					});
				});

				// Mélanger le tableau
				for (let i = allDefinitions.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[allDefinitions[i], allDefinitions[j]] = [allDefinitions[j], allDefinitions[i]];
				}

				// Sélectionner les 5 premières définitions
				const selectedDefinitions = allDefinitions.slice(0, 5);

				// Créer les cartes pour les définitions sélectionnées
				selectedDefinitions.forEach(part => {
					const clone = template.content.cloneNode(true);
					clone.querySelector('.question').textContent = part.name;
					clone.querySelector('.reponse').textContent = part.definition;
					main.appendChild(clone);
				});
			});
		</script>
	</body>
</html>